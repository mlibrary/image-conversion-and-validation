#!/usr/bin/env python3
# Copyright (c) 2017 The Regents of the University of Michigan.
# All Rights Reserved. Licensed according to the terms of the Revised
# BSD License. See LICENSE.txt for details.
from argparse import ArgumentParser

def fix_file (filename):
    with open(filename, "r") as f:
        text = f.read()

    if "ConnectionError" in text:
        with open(filename, "w") as f:
            f.write("except OSError:\n")

parser = ArgumentParser(description="Make backwards compatible")
parser.add_argument("files",
                    nargs="*",
                    help="specific files to read")
parser.add_argument("--version",
                    help="python version to run against")
args = parser.parse_args()

for filename in args.files:
    fix_file(filename)
